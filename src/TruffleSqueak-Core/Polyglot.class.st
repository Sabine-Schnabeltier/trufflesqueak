"
Implementation of GraalVM's polyglot API.
"
Class {
	#name : #Polyglot,
	#superclass : #Object,
	#classVars : [
		'DefaultLanguageInfo',
		'EmphasizeInterop',
		'UseAdaptiveLanguageSelection'
	],
	#classInstVars : [
		'LanguageIDToPolyglotImport',
		'LanguageIDToIcon'
	],
	#category : #'TruffleSqueak-Core'
}

{ #category : #preferences }
Polyglot class >> askForAdaptiveLanguageSelection [
	self useAdaptiveLanguageSelection: (
		self confirm: 'Enable adaptive language selection?')
]

{ #category : #preferences }
Polyglot class >> askForDefaultLanguageInfo [
	| languages |
	languages := Polyglot availableLanguages.
	self defaultLanguageInfo: (
		UIManager default 
			chooseFrom: (languages collect: [ :ea | ea getName ])
			values: languages
			title: 'Which language would you like to use by default?' )
]

{ #category : #preferences }
Polyglot class >> askForRougeStyler [
	RougeStyler useRougeStyler: (self confirm:
		'Do you want to use the Ruby rouge gem for syntax highlighting?')
]

{ #category : #'polyglot-api' }
Polyglot class >> availableLanguages [
	^ self primitiveGetPublicLanguages
]

{ #category : #experimental }
Polyglot class >> bindings [
	^ self primitiveGetPolyglotBindings
]

{ #category : #helpers }
Polyglot class >> chooseLanguageInfo [
	^ self chooseLanguageInfo: 'Please choose a language:'
]

{ #category : #helpers }
Polyglot class >> chooseLanguageInfo: aTitle [
	| languages |
	languages := self availableLanguages.
	^ UIManager default 
			chooseFrom: (languages collect: [ :ea | ea getName asString ])
			values: languages
			title: aTitle
]

{ #category : #preferences }
Polyglot class >> defaultLanguageId [

	^ self defaultLanguageInfo getId asSymbol
]

{ #category : #preferences }
Polyglot class >> defaultLanguageInfo [
	^ DefaultLanguageInfo ifNil: [ LanguageInfoStub instance ]
]

{ #category : #preferences }
Polyglot class >> defaultLanguageInfo: aLanguageInfo [

	DefaultLanguageInfo := aLanguageInfo
]

{ #category : #preferences }
Polyglot class >> emphasizeInterop [

	<preference: 'Emphasize Language Interoperability'
		category: 'Polyglot'
		description: 'If true, more information on language interoperability is globally shown.'
		type: #Boolean>
	^ EmphasizeInterop ifNil: [ false ]
]

{ #category : #preferences }
Polyglot class >> emphasizeInterop: aBoolean [

	EmphasizeInterop := aBoolean.

	"Update all object explorer lists"
	(ObjectExplorer allSubInstances, PolyglotNotebook allInstances)
		do: [ :ea | ea changed: #getList ]
]

{ #category : #'polyglot-api' }
Polyglot class >> eval: aLanguage file: aPath [
	^ self primitiveEval: aLanguage file: aPath
]

{ #category : #'polyglot-api' }
Polyglot class >> eval: aLanguage string: aString [
	^ self primitiveEval: aLanguage string: aString withUnixLineEndings
]

{ #category : #'polyglot-api' }
Polyglot class >> eval: aLanguage string: aString names: anArray arguments: anotherArray [
	^ self primitiveEval: aLanguage string: aString withUnixLineEndings names: anArray arguments: anotherArray
]

{ #category : #'polyglot-api' }
Polyglot class >> evalInInnerContext: aLanguage file: aPath [
	^ self primitiveEvalInInnerContext: aLanguage file: aPath
	
]

{ #category : #'polyglot-api' }
Polyglot class >> evalInInnerContext: aLanguage string: aString [
	^ self primitiveEvalInInnerContext: aLanguage string: aString withUnixLineEndings
]

{ #category : #experimental }
Polyglot class >> evalWithBindings: aLanguage string: aString [
	^ self eval: aLanguage string: aString names: #('bindings') arguments: {self bindings}
]

{ #category : #experimental }
Polyglot class >> exploreScopes [
	(Polyglot availableLanguages collect: [ :ea |
		(Polyglot primitiveGetScope: ea getId asSymbol) ] )
			exploreWithLabel: 'GraalVM Language Scopes'
]

{ #category : #'polyglot-api' }
Polyglot class >> export: aName value: anObject [
	^ self primitiveExport: aName value: anObject	
]

{ #category : #experimental }
Polyglot class >> getLanguageView: languageId for: anObject [
	^ self primitiveGetLanguageView: languageId for: anObject
]

{ #category : #icons }
Polyglot class >> iconFor: aLanguageId [
	"LanguageIDToIcon := nil"
	^ (LanguageIDToIcon ifNil: [
		LanguageIDToIcon := Dictionary newFromPairs: {
			self languageIdHost. self iconJava.
			self languageIdJava. self iconJava.
			self languageIdJS. self iconJS.
			self languageIdLLVM. self iconLLVM.
			self languageIdMarkdown. self iconMarkdown.
			self languageIdPython. self iconPython.
			self languageIdR. self iconR.
			self languageIdRuby. self iconRuby.
			self languageIdSmalltalk. self iconSmalltalk.
			self languageIdWASM. self iconWASM }
		]) at: aLanguageId ifAbsent: [ ToolIcons iconNamed: #breakpoint ]
]

{ #category : #icons }
Polyglot class >> iconJS [
	^ Form
	extent: 16@16
	depth: 32
	fromArray: #( 4294370048 4294436096 4294436096 4294436096 4294436096 4294436096 4294436096 4294436096 4294436096 4294436096 4294436096 4294436096 4294436096 4294436096 4294435840 4294370048 4294435840 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436096 4294435840 4294436096 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436096 4294436096 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436096 4294436096 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436096 4294436096 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294502144 4294436352 4294436352 4294436096 4294436096 4294436352 4294436352 4294436352 4294436352 4294436352 4294436352 4294700800 4294635008 4294436096 4294634496 4294701056 4294635008 4294701056 4294502144 4294436096 4294436096 4294436352 4294436352 4294436352 4294436352 4294502144 4294502656 4286082560 4286740224 4294701312 4292002304 4283977984 4282399488 4287924224 4294304768 4294436352 4294436096 4294436352 4294436352 4294436352 4294436352 4294502144 4294568704 4280689408 4282004480 4294568704 4280886528 4280360450 4282991360 4280031490 4292659968 4294568448 4294436096 4294436352 4294436352 4294436352 4294436352 4294502144 4294568448 4281347072 4282728192 4294040576 4278255872 4284701184 4294701312 4294172928 4294502656 4294436096 4294436096 4294436352 4294436352 4294436352 4294436352 4294502144 4294568448 4281347072 4282465024 4294833152 4284964352 4278190080 4281347072 4289240064 4294568448 4294436352 4294436096 4294436352 4294436352 4294436352 4294502656 4294634752 4294568704 4281347072 4282399232 4294767104 4294701056 4288516608 4281018113 4278190080 4287792384 4294701056 4294436096 4294436352 4294436352 4294502400 4293712128 4292199680 4294833152 4281083904 4282465024 4294173952 4290094848 4294634752 4294700800 4280623617 4281872896 4294634496 4294436096 4294436352 4294502144 4294701312 4285950720 4278584577 4283320320 4278190080 4286608384 4291739136 4278190080 4281478400 4283780864 4278190080 4285490432 4294701056 4294435840 4294436096 4294436096 4294502656 4292989184 4285424896 4282202112 4285885184 4293778432 4294634496 4290029056 4283451648 4282136320 4286411520 4293843968 4294502144 4294435840 4294436096 4294436096 4294435840 4294502656 4294701056 4294634496 4294701056 4294502144 4294435840 4294635008 4294700800 4294634496 4294701312 4294502144 4294370048)
	offset: 0@0
]

{ #category : #icons }
Polyglot class >> iconJava [
	^ Form
	extent: 16@16
	depth: 32
	fromArray: #( 16777215 16777215 8355711 4144959 4144959 4144959 4144959 4144959 4144959 442191938 138888256 4144959 4144959 8158332 16777215 16777215 16777215 16777215 5329233 0 0 0 0 0 0 1431186690 420612096 0 0 5000268 16777215 16777215 16777215 16777215 5658198 0 0 0 0 0 606344708 2240041231 0 0 0 5395026 16777215 16777215 16777215 16777215 5658198 0 0 0 0 909517062 2812700179 757930757 741219333 202246402 0 5395026 16777215 16777215 16777215 16777215 5658198 0 0 0 1229466632 3031592213 1179003656 2004306190 741153797 33685760 0 5395026 16777215 16777215 16777215 16777215 5658198 0 0 286329346 3435690775 656873477 2795791379 673716229 0 0 0 5395026 16777215 16777215 16777215 16777215 5658198 0 0 286329346 2778948627 202180610 3738797337 976823047 0 0 0 5395026 16777215 16777215 16777215 16777215 5658198 0 0 0 1179069192 960111623 1936868877 3233641494 0 0 0 5263439 16777215 16777215 16777215 16777215 5658198 0 235210505 319228685 0 455283200 472060416 1667775751 0 184813063 1041243172 374955616 16777215 16777215 16777215 16777215 5460561 856298265 2923125874 1511993404 1091969579 1041375275 1310796591 1175987760 991174439 151192838 923209751 2441256624 16777215 16777215 16777215 16777215 5592405 100729347 755963934 1663186242 1024794921 923999524 856693539 940776998 386403343 33620225 1494295085 1618117776 16777215 16777215 16777215 16777215 5658198 0 302385420 1931885643 1965571661 2015903566 1999126350 1881619787 688789019 453644051 873207068 5263183 16777215 16777215 16777215 16777215 5526098 0 0 1528770619 1763981638 1461529912 1562325309 1629565759 201590280 0 0 5329233 16777215 16777215 16777215 16777215 828730996 1494558514 369626384 537596181 1663186242 2032746576 1931951435 1293560115 167970055 100795140 419629067 106190166 16777215 16777215 16777215 16777215 1500413577 2501983825 1780298047 1511467316 1259479082 1192304167 1209081640 1276322347 1461135411 1561864758 1510743337 727409512 16777215 16777215 16777215 16777215 8092280 3947323 474500433 1213621358 1482452345 1600024957 1650422399 1616867966 1532850043 1348036979 910906716 192905345 16777215 16777215)
	offset: 0@0
]

{ #category : #icons }
Polyglot class >> iconLLVM [
	^ Form
	extent: 16@16
	depth: 32
	fromArray: #( 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 33554431 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 452919295 536410618 16777215 16777215 16777215 16777215 251658239 67108863 16777215 16777215 16777215 16777215 16777215 16777215 16777215 737671417 3364524185 4081142102 1305136335 184483582 2074914998 3362682238 3029900965 1523898586 201195262 16777215 16777215 620165112 553122041 16777215 16777215 2260977356 4282928989 4279705647 1822598828 251526654 3661777493 4279442218 4280758080 4233650284 2261372370 16777215 1240264175 2446645210 2329270750 1793452009 16777215 1991818178 4282073937 4280692540 1671801262 16777215 3093128301 4279771439 4282863452 4282139732 3129708699 16777215 2765214934 2028267240 16777215 2748832736 520028159 2042018239 4280363322 4247532608 1270595265 16777215 2340653200 4279639853 4281810764 4280560698 4098642784 469301753 1792137434 4206610127 301989887 1944184038 1240988154 3079442841 4279244839 2224133532 451537643 16777215 1303952319 3996795469 3628946526 4279310888 4280166196 3416829109 587071487 1122692849 117440511 2748240853 2513688538 4282337362 3727899462 167311865 16777215 16777215 384494572 2459277727 501803499 3293204827 4279310629 4282271057 3529862006 2411183038 2731529430 4289508534 3782573188 3661382475 1437775288 16777215 16777215 16777215 16777215 502264048 16777215 16645629 2039518361 1807071419 2778308261 4283061341 4287798434 3300376000 334162924 200734455 16777215 16777215 16777215 16777215 16777215 16777215 150797821 803925228 134217727 301989887 3049572812 4287206297 3986926513 1860626667 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 1825362386 1523701206 1709105634 2479344846 2613036231 1054991332 468709616 1257107441 100663295 16777215 16777215 16777215 16777215 16777215 16777215 16777215 904325609 1959514321 1892799958 1289609441 771094263 553451005 335544319 117440511 33554431 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 167640830 268303869 100663295 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215)
	offset: 0@0
]

{ #category : #icons }
Polyglot class >> iconMarkdown [
	^Form
	extent: 16@16
	depth: 32
	fromArray: #( 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 284291569 301002992 301002992 301002992 301002992 301002992 301002992 301002992 301002992 301002992 301002992 301002992 301002992 301068785 16777215 2707513697 3008253518 2974830672 2974830672 2974830672 2974830672 2974830672 2974830672 2974830672 2974830672 2974830672 2974830672 2974830672 2974830672 3008319311 2724290913 3409393463 167311608 16777215 16777215 83820286 150665978 33554431 16777215 33554431 150665978 150665978 16777215 16777215 150665978 167311608 3376036410 3192144964 16777215 1805096855 2540333674 351203054 16777215 852611537 2607179366 1220197050 16777215 16777215 2256305276 1888653970 16777215 16777215 3158787911 3208922180 16777215 3108653642 4278190080 3041807950 618585822 3793821985 4278190080 2156168324 16777215 16777215 3944290585 3309190718 16777215 16777215 3175499334 3208922180 16777215 2974962258 4211541767 4278255873 4011004691 4261676036 4278321666 2039122570 100465916 250868723 3760399139 3192210757 267580146 83820286 3158787911 3208922180 16777215 3075230796 3626707755 2055833993 4228253190 1721605533 4261741829 2022411147 250868723 3208856387 4278255873 4244898820 2841270874 167311608 3125365065 3208922180 16777215 3242345026 3960936215 83820286 952814282 468314601 4278190080 2206236800 16777215 919457229 4094561806 3777110562 568517346 16777215 3175499334 3192144964 16777215 1888653970 2339862391 16777215 16777215 317846001 2657313635 1270331319 16777215 16777215 1019725767 735565783 16777215 16777215 3158787911 3409393463 150665978 16777215 16777215 117177339 117177339 83754493 16777215 16777215 117177339 117177339 16777215 16777215 117177339 133888762 3376036410 2740936543 3008319311 2974830672 2974830672 2974830672 2974830672 2974830672 2974830672 2974830672 2974830672 2974830672 2974830672 2974830672 2974830672 3008319311 2757647966 16777215 317714415 334425838 334425838 334425838 334425838 334425838 334425838 334425838 334425838 334425838 334425838 334425838 334425838 317714415 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215)
	offset: 0@0
]

{ #category : #icons }
Polyglot class >> iconPython [
	^ Form
	extent: 16@16
	depth: 32
	fromArray: #( 16777215 16777215 16777215 16777215 769518324 3178273993 4082139064 4266425011 4249516209 3914564021 2810029257 552005622 16777215 16777215 16777215 16777215 16777215 16777215 16777215 33554431 3312295113 1990443999 2826938832 4282806958 4283070383 4282938539 4282411684 3178142144 50331647 16777215 16777215 16777215 16777215 16777215 16777215 16777215 3814427584 2442114261 3245251525 4282543272 4282938796 4282938538 4282675110 3830809264 117243647 16777215 16777215 16777215 16777215 16777215 16777215 16777215 2141044700 2810029516 2743183822 2709760974 4132272814 4282806695 4282674851 3747054768 268238331 234881014 16777215 16777215 167443967 2341779931 3479474884 3512963778 3328874435 3278608579 3278542785 3328742590 4199184299 4282806693 4282543265 3545728184 2348214938 3858030110 3103187817 503250154 2325068506 4282741169 4282938801 4282873006 4282806956 4282741162 4282675111 4282609317 4282806693 4282740900 4282543006 3562373814 2633295498 4294104576 4293972480 2952192880 3914827709 4283004850 4283070641 4283070383 4282873004 4282675111 4282609060 4282477474 4282477216 4282411421 4281950102 2859374791 2667179136 4294038528 4294038272 4176597762 4283202227 4283070641 4283070383 4282872746 4132075440 3160904902 3110901698 3110901440 3110835646 3093992380 2525144777 1457776587 3925138726 4294038272 4293972480 4293971968 4283070641 4283070383 4282873004 4048320944 1540020954 2432430990 3120163945 3136940905 3136875111 3136874598 3153652319 4076067861 4294038272 4294038272 4293971968 4293905920 3948184246 4282872747 4282609062 2893324234 2633889411 4294237696 4294237696 4294171648 4294171136 4294104832 4294038784 4294038528 4294038272 4293972224 4293905920 4142911232 2592648910 4282477219 4282345633 2810095048 3355111004 4294237696 4294237447 4294171392 4294104832 4294038784 4294038272 4293972224 4293906176 4293905664 4293773312 2633359739 351401723 2910429638 3830347947 2475405261 3338267741 4294171648 4294171392 4260616456 3371556953 3270893660 3270827612 3304381528 3488798792 3472021058 2499142274 251657973 16777215 16777215 217578236 150666494 3522618710 4294171136 4294105088 4226995974 2801263992 2750866297 2851463276 2314725006 83886079 16777215 16777215 16777215 16777215 16777215 16777215 16777215 3606438480 4294104832 4294104832 4294038784 4293906176 3455376462 2247682192 4008759830 167772156 16777215 16777215 16777215 16777215 16777215 16777215 16777215 2885150327 4294038272 4294038528 4293972480 4293906176 3119832418 1811475364 3505509957 117440509 16777215 16777215 16777215 16777215 16777215 16777215 16777215 402652654 2616714879 3807565615 4193308928 4226863104 4059025152 3253917519 905770452 16777215 16777215 16777215 16777215)
	offset: 0@0
]

{ #category : #icons }
Polyglot class >> iconR [
	^ Form
	extent: 16@16
	depth: 32
	fromArray: #( 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 67108863 435813114 670430966 670430710 435812857 67108863 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 989000692 2530925790 3569994702 4072719045 4290428096 4290230717 4156078781 3636379843 2547044820 988737263 16777215 16777215 16777215 16777215 301792765 2732120796 4290757060 4290362559 4290099388 4290033595 4240030398 3955015104 3921329087 4139038137 4289375151 4289111981 2848376778 301726716 16777215 285081085 3318731220 4290428352 4290493888 4290230974 3083652817 1541859304 637007862 268303612 218037757 368835322 821228017 1843388126 3686184117 3468015290 284949499 2547703006 4290428095 4290493888 4156144832 1558636521 16777215 1187108596 3311241173 3361770709 3395193555 3378416082 3294530002 2909442775 1756350185 3367548857 2663761352 4089496261 4290296767 4290033338 2044649441 16777215 16777215 1822999531 4281687491 4282082756 4282082755 4282016962 4281819327 4281753277 4265173696 2175582171 3803032236 4273585087 4290164924 4289967547 771028213 16777215 16777215 1772930539 4281950916 4282016706 1789510633 485093626 1889779430 4281819069 4281621434 2642781655 3484659631 3385182154 4289770166 4289572789 1608770790 16777215 16777215 1772930539 4281885121 4282016705 2374807008 1388040173 2592187610 4281687483 4281555642 2426122966 2965223865 1055846127 4172395447 4289309615 3870536890 888140017 16777215 1655621613 4281819328 4282214595 4281621436 4281489850 4281687483 3947130305 2542118617 2663169218 1189405668 16777215 1357375465 3987714230 4288717223 4188514478 2161628629 2275391711 4281819328 4282016960 3093926612 3512173260 4281687226 3528752584 2595272904 1407246046 16777215 16777215 16777215 603321846 2580138701 3987253679 4288715933 4285301933 4282016963 4281950912 3515784633 3717832622 4281950392 4281423797 3579281349 16777215 16777215 16777215 16777215 16777215 16777215 368703993 1223157478 2844830160 4281753277 4281753276 2761469131 1273357281 2575672791 4281358004 4281423538 1789378531 16777215 16777215 16777215 16777215 16777215 16777215 16777215 1622067179 4281621434 4281687225 1220596720 16777215 418181883 3947130045 4281489586 3896864187 518450680 16777215 16777215 16777215 16777215 16777215 16777215 334624252 786031604 786031604 267646973 16777215 16777215 551939319 785965811 852877553 317781243 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215)
	offset: 0@0
]

{ #category : #icons }
Polyglot class >> iconRuby [
	^ Form
	extent: 16@16
	depth: 32
	fromArray: #( 16777215 16777215 16777215 16777215 16777215 16777215 637335286 2095162532 3671351907 4191647349 4175270283 4157412629 4157276160 4021551109 2763414879 368504301 16777215 16777215 16777215 16777215 150994943 2598744753 4040042540 4291559424 4291559424 4291559424 4292711059 4291714655 4290445312 4289462272 4288086016 2947308890 16777215 16777215 16777215 251658239 3067377014 4291100672 4291297280 4291559424 4291559424 4291559424 4292377462 4293176730 4290647565 4289593344 4289003520 4288217088 16777215 16777215 369098751 3268173407 4290707456 4290969600 4291100672 4291297280 4291559424 4291624960 4291838773 4291626240 4291624960 4290707456 4288151552 4287365120 16777215 184549375 3385816181 4290314240 4290576384 4290772992 4290969600 4291100672 4291297280 4291771197 4291698206 4291559424 4291493888 4291428352 4289724416 4120054800 16777215 1877063865 4289658880 4290183168 4290445312 4290576384 4290707456 4290904064 4291232784 4293110700 4290445312 4290445312 4290117632 4289527808 4288806912 3852867355 368966651 3869650480 4288806912 4289724416 4290183168 4290445312 4290510848 4290772992 4292844178 4293575605 4289921024 4289986560 4289855488 4289003520 4288151552 3568249645 2431237818 4288937984 4288086016 4288937984 4289658880 4290117632 4290445312 4291911765 4292242765 4292040757 4290315008 4289200128 4289069056 4288741376 4288675840 3233431617 3773215918 4291496448 4289003520 4288020480 4288675840 4290060323 4291776591 4291697424 4291624960 4291624960 4290576384 4288741376 4288413696 4288151552 4289069056 2898220374 3873946031 4292310120 4291629825 4289268752 4290540919 4291982196 4291624960 4291559424 4291559424 4291559424 4290707456 4288479232 4288151552 4288282624 4289396736 2546756459 4040248377 4293774277 4293376431 4293641658 4293641658 4290183168 4289921024 4290183168 4290445312 4290772992 4290641920 4288348160 4288217088 4288413696 4289855488 2195292546 4207345664 4291708474 4292510820 4292243276 4291704352 4289986560 4289789952 4289331200 4289003520 4289003520 4289396736 4288741376 4288413696 4288217088 4289855488 1843304344 4290052096 4290772992 4291700742 4291699969 4291035136 4289789952 4289593344 4289396736 4288872448 4288217088 4289265664 4290969600 4289331200 4288020480 4289265664 1508158896 4206034944 4289921024 4291362816 4291624960 4290510848 4289658880 4289200128 4289003520 4289003520 4290314240 4291559424 4291559424 4291559424 4289396736 4288610304 1189790915 2730647392 4289134592 4289724416 4290838528 4290117632 4289527808 4288937984 4288741376 4289855488 4290772992 4290904064 4290969600 4291297280 4291428352 4273082378 871224788 318370032 2696702053 3986888978 4155899904 3954508299 3719240479 3450744626 3165798724 2880853077 2562353000 2260826747 1942654606 1641259425 1356838580 1055706570 167639545)
	offset: 0@0
]

{ #category : #icons }
Polyglot class >> iconSmalltalk [
	^ Form
	extent: 16@16
	depth: 32
	fromArray: #( 2960685 0 0 1378957119 2759491469 3364983712 4223517379 3887183771 3936656831 3329788324 1984455004 1126052657 0 0 0 2960685 2566184 302647304 2390188388 4293050822 4294432464 4294300871 4293054656 4291153590 4288127389 4289963435 4291542727 4273651385 2557569618 605624076 0 3026478 355939381 3400696450 4294957518 4294960327 4294502594 4293063363 4292017855 4290962921 4291617508 4293450923 4293766844 4293831896 4293768930 4039943574 1194140945 2434857 1921476456 4294560180 4294962884 4294043579 4292344263 4291952580 4291030482 4291354623 4290828522 4294574017 4293516969 4294948277 4294093004 4294224895 3600247689 119941414 2628294019 4294961335 4294237606 4292082629 4292083654 4290640564 4291354875 4290961407 4290105835 4294574018 4294115250 4293706404 4294947505 4293564353 4293431039 2021678472 3538800803 4294956689 4292209325 4291559360 4290183070 4290044880 4291617535 4290172927 4289449193 4294508479 4294639544 4293190293 4294945708 4294942876 4292967131 3587606766 3201807232 4294299004 4290706860 4290445221 4288871058 4290303991 4290566911 4288596223 4288463840 4294574002 4294508466 4293326984 4294418579 4294942103 4293292208 3317327831 1820683601 4292789613 4289200022 4288413563 4287620250 4290105855 4289844479 4287282431 4288463825 4294770603 4294377386 4293328772 4294154369 4294938252 4241249403 1263547999 356004144 3937375819 4288151415 4286971741 4286895018 4288857855 4287611135 4284917503 4288858293 4294705047 4294115220 4292800362 4294540402 4294932087 2624397858 1845028 2237481 1849962518 4288015712 4286119759 4285974444 4287084543 4285640447 4283274239 4290764689 4294311814 4293656437 4292262741 4294926697 3905633855 520880128 2764077 2895149 33554432 2906879532 4286381900 4285318561 4285507839 4283341311 4283601883 4293131378 4293721964 4292409164 4294602066 3737204026 823592197 0 3026478 2960685 0 268502530 3494819883 4285062784 4284390911 4281632767 4287281821 4294573923 4293262669 4292376637 2945327144 487129345 0 0 3026478 2960685 0 0 318899968 2838328100 4265644513 4283537114 4292079703 3937717304 2858763800 1311506440 0 0 0 0 2829099 2960685 0 0 0 1090978050 1695751978 2385789735 1698447383 387257873 395277 659215 1052944 1118481 1118481 1118481 3881787 2960685 0 0 0 2538552115 4021255010 3041669417 10856108 15198184 15329769 15329769 15329769 15329769 15329769 15329769 15592941 2894892 0 0 0 1782787621 4224025186 2000429334 12633028 16777215 16777215 16777215 16777215 16777215 16777215 16777215 16777215)
	offset: 0@0
]

{ #category : #icons }
Polyglot class >> iconWASM [
	^ (ColorForm
	extent: 16@16
	depth: 8
	fromArray: #( 0 258 33619968 0 0 772 67305472 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 5 100665093 134612998 101253120 5 168364555 201984010 168558592 0 168626702 252380942 185597952 0 286134538 302387219 219021312 0 269092370 168104458 168432640 0 118098963 168299021 85067264 0 134612997 218629632 460544 0 0 0 0)
	offset: 0@0)
	colorsFromArray: #(#(0.396 0.31 0.941) #(0.396 0.31 0.941 0.376) #( ) #(0.396 0.31 0.941 0.937) #(0.396 0.31 0.941 0.314) #(0.549 0.482 0.957) #(0.698 0.655 0.973) #(0.624 0.569 0.965) #(0.47 0.396 0.949) #(0.435 0.353 0.945) #(1 1 1) #(0.851 0.827 0.984) #(0.585 0.526 0.961) #(0.659 0.612 0.969) #(0.961 0.957 0.996) #(0.737 0.698 0.973) #(0.772 0.741 0.977) #(0.887 0.871 0.988) #(0.926 0.914 0.992) #(0.811 0.784 0.98) #(0.51 0.439 0.953) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( ) #( )  )
]

{ #category : #'polyglot-api' }
Polyglot class >> import: aName [
	^ self primitiveImport: aName	
]

{ #category : #'class initialization' }
Polyglot class >> initialize [
	Smalltalk addToStartUpList: self.
	self setUpPolyglotEnvironment
]

{ #category : #helpers }
Polyglot class >> isPermitted: aLanguageID [
	^ self primitiveGetPublicLanguages anySatisfy: [ :ea | ea getId = aLanguageID ]
]

{ #category : #'polyglot-api' }
Polyglot class >> isPolyglotEvalAllowed [
	^ self primitiveIsPolyglotEvalAllowed
]

{ #category : #constants }
Polyglot class >> languageIdHost [
	^ #host
]

{ #category : #constants }
Polyglot class >> languageIdJS [
	^ #js
]

{ #category : #constants }
Polyglot class >> languageIdJava [
	^ #java
]

{ #category : #constants }
Polyglot class >> languageIdLLVM [
	^ #llvm
]

{ #category : #constants }
Polyglot class >> languageIdMarkdown [
	^ #markdown
]

{ #category : #constants }
Polyglot class >> languageIdPython [
	^ #python
]

{ #category : #constants }
Polyglot class >> languageIdR [
	^ #R
]

{ #category : #constants }
Polyglot class >> languageIdRuby [
	^ #ruby
]

{ #category : #constants }
Polyglot class >> languageIdSmalltalk [
	^ #smalltalk
]

{ #category : #constants }
Polyglot class >> languageIdWASM [
	^ #wasm
]

{ #category : #'polyglot-api' }
Polyglot class >> languageInfoFor: aLanguageID [
	^ (self primitiveGetInternalLanguageInfo: aLanguageID)
		ifNotNil: [ :info | info ]
		ifNil: [ self error: 'Could not find ', aLanguageID ]
]

{ #category : #'polyglot-api' }
Polyglot class >> languageNameFor: aLanguageID [
	^ (self languageInfoFor: aLanguageID) getName asString
]

{ #category : #primitives }
Polyglot class >> primitiveEval: aLanguage file: aString [
	<primitive: 'primitiveEvalFile' module: 'PolyglotPlugin'>
	PolyglotError signal
]

{ #category : #primitives }
Polyglot class >> primitiveEval: aLanguage string: aString [
	<primitive: 'primitiveEvalString' module: 'PolyglotPlugin'>
	PolyglotError signal
]

{ #category : #primitives }
Polyglot class >> primitiveEval: aLanguage string: aString names: anArray arguments: anotherArray [
	<primitive: 'primitiveEvalStringWithArguments' module: 'PolyglotPlugin'>
	anArray size ~= anotherArray size
		ifTrue: [ self error: 'size of names and arguments does not match' ].
	PolyglotError signal
]

{ #category : #primitives }
Polyglot class >> primitiveEvalInInnerContext: aLanguage file: aPath [
	<primitive: 'primitiveEvalFileInInnerContext' module: 'PolyglotPlugin'>
	PolyglotError signal
]

{ #category : #primitives }
Polyglot class >> primitiveEvalInInnerContext: aLanguage string: aString [
	<primitive: 'primitiveEvalStringInInnerContext' module: 'PolyglotPlugin'>
	PolyglotError signal
]

{ #category : #primitives }
Polyglot class >> primitiveExport: aName value: aValue [
	<primitive: 'primitiveExport' module: 'PolyglotPlugin'>
	PolyglotError signal
]

{ #category : #primitives }
Polyglot class >> primitiveGetInternalLanguageInfo: aLanguageID [
	"Accepts IDs for internal and public languages"
	<primitive: 'primitiveGetInternalLanguageInfo' module: 'PolyglotPlugin'>
	^ aLanguageID = LanguageInfoStub instance getId
		ifTrue: [ LanguageInfoStub instance ]
		ifFalse: [ nil ]
]

{ #category : #primitives }
Polyglot class >> primitiveGetInternalLanguages [
	<primitive: 'primitiveGetInternalLanguages' module: 'PolyglotPlugin'>
	^ { LanguageInfoStub instance }
]

{ #category : #primitives }
Polyglot class >> primitiveGetLanguageView: languageId for: anObject [
	<primitive: 'primitiveGetLanguageView' module: 'PolyglotPlugin'>
	self primitiveFailed
]

{ #category : #primitives }
Polyglot class >> primitiveGetPolyglotBindings [
	<primitive: 'primitiveGetPolyglotBindings' module: 'PolyglotPlugin'>
	self assert: self primitiveIsPolyglotBindingsAccessAllowed not description: 'Bindings access must not be allowed'.
	self error: 'Polyglot bindings access is not allowed'
]

{ #category : #primitives }
Polyglot class >> primitiveGetPublicLanguageInfo: aLanguageID [
	<primitive: 'primitiveGetPublicLanguageInfo' module: 'PolyglotPlugin'>
	^ aLanguageID = LanguageInfoStub instance getId
		ifTrue: [ LanguageInfoStub instance ]
		ifFalse: [ nil ]
]

{ #category : #primitives }
Polyglot class >> primitiveGetPublicLanguages [
	<primitive: 'primitiveGetPublicLanguages' module: 'PolyglotPlugin'>
	^ { LanguageInfoStub instance }
]

{ #category : #primitives }
Polyglot class >> primitiveGetScope: languageId [
	<primitive: 'primitiveGetScope' module: 'PolyglotPlugin'>
	^ languageId = Polyglot languageIdSmalltalk
		ifTrue: [ SmalltalkInteropScope instance ]
		ifFalse: [ self primitiveFailed ]
]

{ #category : #primitives }
Polyglot class >> primitiveImport: aName [
	<primitive: 'primitiveImport' module: 'PolyglotPlugin'>
	PolyglotError signal
]

{ #category : #primitives }
Polyglot class >> primitiveIsPolyglotBindingsAccessAllowed [
	<primitive: 'primitiveIsPolyglotBindingsAccessAllowed' module: 'PolyglotPlugin'>
	^ false
]

{ #category : #primitives }
Polyglot class >> primitiveIsPolyglotEvalAllowed [
	<primitive: 'primitiveIsPolyglotEvalAllowed' module: 'PolyglotPlugin'>
	^ false
]

{ #category : #primitives }
Polyglot class >> primitiveLastError [
	<primitive: 'primitiveGetLastError' module: 'PolyglotPlugin'>
	self primitiveIsPolyglotEvalAllowed
		ifTrue: [ self primitiveFailed ]
		ifFalse: [ self error: 'Polyglot API is not available' ]
]

{ #category : #'system startup' }
Polyglot class >> setUpPolyglotEnvironment [
	self primitiveIsPolyglotEvalAllowed
		ifTrue: [ ForeignObject register ].
	self primitiveIsPolyglotBindingsAccessAllowed
		ifTrue: [ self export: 'bindings' value: Polyglot bindings ]
]

{ #category : #'system startup' }
Polyglot class >> startUp: resuming [
	resuming ifFalse: [ ^ self ].
	self setUpPolyglotEnvironment
]

{ #category : #preferences }
Polyglot class >> toggleEmphasizeInterop [

	self emphasizeInterop: self emphasizeInterop not
]

{ #category : #preferences }
Polyglot class >> useAdaptiveLanguageSelection [

	<preference: 'The selected object determines the language in use'
		category: 'Polyglot'
		description: 'If true, ...'
		type: #Boolean>
	^ UseAdaptiveLanguageSelection ifNil: [ false ]
]

{ #category : #preferences }
Polyglot class >> useAdaptiveLanguageSelection: aBoolean [

	UseAdaptiveLanguageSelection := aBoolean
]
